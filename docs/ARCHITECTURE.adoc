// SPDX-License-Identifier: AGPL-3.0-or-later
= AmbientOps Architecture
:toc:
:toclevels: 3

== Overview

AmbientOps is an umbrella platform for ambient computing operations, providing unified control for CI/CD automation, system monitoring, and resilience.

== System Architecture

....
┌─────────────────────────────────────────────────────────────────────────────────┐
│                              AMBIENTOPS PLATFORM                                 │
│                     Ambient Computing Operations Control Plane                   │
└─────────────────────────────────────────────────────────────────────────────────┘
                                        │
           ┌────────────────────────────┼────────────────────────────┐
           │                            │                            │
           ▼                            ▼                            ▼
┌─────────────────────┐    ┌─────────────────────┐    ┌─────────────────────┐
│   CI/CD AUTOMATION  │    │     MONITORING      │    │  SYSTEM RESILIENCE  │
│                     │    │                     │    │                     │
│  ┌───────────────┐  │    │  ┌───────────────┐  │    │  ┌───────────────┐  │
│  │ cicd-hyper-a  │  │    │  │   gitvisor    │  │    │  │ system-flare  │  │
│  │  (Logtalk)    │  │    │  │  (monitoring) │  │    │  │ (panic halt)  │  │
│  └───────┬───────┘  │    │  └───────┬───────┘  │    │  └───────────────┘  │
│          │          │    │          │          │    │                     │
│  ┌───────▼───────┐  │    │  ┌───────▼───────┐  │    │  ┌───────────────┐  │
│  │.git-private-  │  │    │  │system-        │  │    │  │system-freeze- │  │
│  │    farm       │  │    │  │observatory    │  │    │  │   ejector     │  │
│  │ (hook distro) │  │    │  │(trend analysis)│  │    │  │(crash dump)   │  │
│  └───────────────┘  │    │  └───────────────┘  │    │  └───────────────┘  │
│                     │    │                     │    │                     │
│  ┌───────────────┐  │    │  ┌───────────────┐  │    │  ┌───────────────┐  │
│  │repo-slm-      │  │    │  │system-        │  │    │  │               │  │
│  │  augmentor    │  │    │  │emergency-room │  │    │  │  (recovery    │  │
│  │(knowledge DB) │  │    │  │(triage)       │  │    │  │   server)     │  │
│  └───────────────┘  │    │  └───────────────┘  │    │  └───────────────┘  │
└─────────────────────┘    └─────────────────────┘    └─────────────────────┘
           │                            │                            │
           └────────────────────────────┼────────────────────────────┘
                                        │
                                        ▼
                        ┌───────────────────────────────┐
                        │       NOTIFICATION LAYER      │
                        │                               │
                        │  ┌─────────┐    ┌─────────┐   │
                        │  │echidna- │    │ rhodibot│   │
                        │  │  bot    │    │(dash-   │   │
                        │  │(Discord)│    │ board)  │   │
                        │  └─────────┘    └─────────┘   │
                        └───────────────────────────────┘
....

== Data Flow

....
┌──────────────────────────────────────────────────────────────────────────────┐
│                           NEUROSYMBOLIC PIPELINE                             │
│                                                                              │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐   │
│  │   GitHub    │    │   Neural    │    │ Distillation│    │  Symbolic   │   │
│  │   Actions   │───▶│   Layer     │───▶│   Layer     │───▶│   Layer     │   │
│  │   Logs      │    │ (Pattern    │    │(Rule        │    │ (Logtalk    │   │
│  │             │    │  Detection) │    │ Conversion) │    │  Execution) │   │
│  └─────────────┘    └─────────────┘    └─────────────┘    └──────┬──────┘   │
│                                                                   │          │
│                      ┌────────────────────────────────────────────┘          │
│                      ▼                                                       │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                        HOOK WAVE PROPAGATION                            │ │
│  │                                                                         │ │
│  │   cicd-hyper-a ──▶ .git-private-farm ──▶ [200+ repos receive hooks]    │ │
│  │                                                                         │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
└──────────────────────────────────────────────────────────────────────────────┘
....

== Hospital Model

....
┌──────────────────────────────────────────────────────────────────────────────┐
│                            HOSPITAL MODEL                                     │
│         (Triage → Diagnosis → Treatment → Prevention → Monitoring)           │
│                                                                              │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐     │
│  │   TRIAGE     │  │  DIAGNOSIS   │  │  TREATMENT   │  │  PREVENTION  │     │
│  │              │  │              │  │              │  │              │     │
│  │ system-      │  │ gitvisor     │  │ cicd-hyper-a │  │ .git-private-│     │
│  │ emergency-   │─▶│ (analyze     │─▶│ (apply       │─▶│    farm      │     │
│  │ room         │  │  failures)   │  │  fixes)      │  │ (deploy      │     │
│  │ (stabilize)  │  │              │  │              │  │  immunity)   │     │
│  └──────────────┘  └──────────────┘  └──────────────┘  └──────────────┘     │
│         ▲                                                     │              │
│         │                                                     │              │
│         └─────────────────────────────────────────────────────┘              │
│                              Feedback Loop                                   │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐   │
│  │                      MONITORING (system-observatory)                 │   │
│  │                       Long-term trend analysis                        │   │
│  └──────────────────────────────────────────────────────────────────────┘   │
└──────────────────────────────────────────────────────────────────────────────┘
....

== Satellite Relationships

[cols="1,1,2"]
|===
| Satellite | Category | Purpose

| cicd-hyper-a | CI/CD | Logtalk rule engine for automation
| gitvisor | Monitoring | Repository supervision
| .git-private-farm | Infrastructure | Hook distribution
| repo-slm-augmentor | Knowledge | Security error catalog
| echidnabot | Notification | Discord alerts
| rhodibot | Dashboard | Health metrics display
| system-emergency-room | Hospital | Immediate triage
| system-observatory | Hospital | Trend analysis
| system-flare | Resilience | Panic button halt
| system-freeze-ejector | Resilience | Crash state dump
|===

== Cross-Forge Support

....
┌───────────────────────────────────────────────────────────────────┐
│                     MULTI-FORGE ARCHITECTURE                      │
│                                                                   │
│   ┌──────────┐   ┌──────────┐   ┌──────────┐   ┌──────────┐      │
│   │  GitHub  │   │  GitLab  │   │Bitbucket │   │ Codeberg │      │
│   └────┬─────┘   └────┬─────┘   └────┬─────┘   └────┬─────┘      │
│        │              │              │              │             │
│        └──────────────┴──────────────┴──────────────┘             │
│                              │                                    │
│                              ▼                                    │
│                    ┌──────────────────┐                           │
│                    │  forge_adapters  │                           │
│                    │     .lgt         │                           │
│                    │  (Logtalk)       │                           │
│                    └────────┬─────────┘                           │
│                             │                                     │
│                             ▼                                     │
│                    ┌──────────────────┐                           │
│                    │   cicd_rules     │                           │
│                    │      .lgt        │                           │
│                    │  (Unified)       │                           │
│                    └──────────────────┘                           │
└───────────────────────────────────────────────────────────────────┘
....

== Technology Stack

[cols="1,1"]
|===
| Component | Technology

| Rule Engine | Logtalk (on SWI-Prolog)
| Knowledge Storage | Virtuoso Open Source (planned)
| Batch Scripts | Julia
| Configuration | Nickel
| State Files | Guile Scheme (.scm)
| API Adapters | ReScript/Deno
| Resilience Tools | Rust (kernel-level)
|===
